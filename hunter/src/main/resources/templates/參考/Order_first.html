<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="./css/style_first.css">
    <link rel="stylesheet" href="./css/footer.css" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-U1DAWAznBHeqEIlVSCgzq+c9gqGAJn5c/t99JyeKa9xxaYpSvHU5awsuZVVFIhvj" crossorigin="anonymous"></script>    
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.0/jquery.min.js"></script>
    <script type="text/javascript" src="./srcipt/cookie.js"></script>
    
    <title>填寫訂購資料</title>
</head>

<body>
  <!-- 透過 jquery 載入 header -->
	<div id="header"></div>

    <div class="container mt-5 ">
        <div class="row justify-content-center">
          <div class="top col-12">
            <button class="btn ra active">
              <p class="s1">step1<br />確認商品資訊</p>
            </button>
            <span class="arrow active align-middle">
              <i class="fas fa-arrow-circle-right fa-2x mx-2"></i>
            </span>
            <button class="btn ra active">
              <p class="s2">Step2<br />填寫訂購資料</p>
            </button>
            <span class="arrow active align-middle">
              <i class="fas fa-arrow-circle-right fa-2x mx-2"></i>
            </span>
            <button class="btn ra">
              <p class="s3">step3<br />選擇付款方式</p>
            </button>
            <span class="arrow align-middle">
              <i class="fas fa-arrow-circle-right fa-2x mx-2"></i>
            </span>
            <button class="btn ra">
              <p class="s4">step4<br />完成訂購</p>
            </button>
          </div>
         </div>
        </div>

        
    <div style="margin: 30px 0px 0px 0px;">
        <div class="container">
            <div class="odd">
                <p id="od">填寫訂購人資料</p>
            </div>
            <hr>
            <form>
              <div class="mb-3 mt-4">
                <label class="form-label">訂購人姓名:</label>
                <input type="email" class="form-control" id="purchaserName" aria-describedby="emailHelp">
                <label id="purchaserNameER" class="errorMsg" style="color: red;"></label>
              </div>
              <div class="mb-3">
                <label class="form-label">訂購人手機:</label>
                <input type="phone" class="form-control" id="purchaserPhone">
                <label id="purchaserPhoneER" class="errorMsg" style="color: red;"></label>
              </div>
              <div class="mb-3">
                  <label class="form-label">訂購人 E-Mail:</label>
                  <input type="E-Mail" class="form-control" id="purchaserEmail">
                  <label id="purchaserEmailER" class="errorMsg" style="color: red;"></label>

                </div>
                <div class="odd2">
                    <p id="od">填寫收件人資料</p>
                </div>
                <hr>
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" value="" id="flexCheckIndeterminate">
                  <label class="form-check-label" for="flexCheckIndeterminate">
                    <p>同訂購人資料</p>
                  </label>
                </div>
            <form>
              <div class="mb-3 mt-4">
                <label class="form-label">收件人姓名:</label>
                <input type="email" class="form-control" id="receiverName" aria-describedby="emailHelp">
                <label id="receiverNameER" class="errorMsg" style="color: red;"></label>

              </div>
              <div class="mb-3">
                <label class="form-label">收件人手機:</label>
                <input type="phone" class="form-control" id="receiverPhone">
                <label id="receiverPhoneER" class="errorMsg" style="color: red;"></label>
              </div>
              <div class="mb-3">
                  <label class="form-label">收件人 E-Mail:</label>
                  <input type="E-Mail" class="form-control" id="receiverEmail">
                  <label id="receiverEmailER" class="errorMsg" style="color: red;"></label>

                </div>
            </form>
            <div>
                <button type="button" class="btnNt" id="previousStep" style="border-color: transparent;margin-left: 900px;">返回上一步</button>
                <button type="button" class="btnNt" id="nextStep" style="border-color: transparent;" >>>下一步</button>
            
              </div>    
               
            
    </div>
    <!-- 透過 jquery 載入 header -->
    <div id="footer"></div>
</body>
<script>
  
$(function(){
  $("#header").load("./header.html");
  $("#footer").load("./footer.html");
  $("#flexCheckIndeterminate").click(function(){
    if($(this).is(":checked")){
      $("#receiverName").val($("#purchaserName").val());
      $("#receiverPhone").val($("#purchaserPhone").val());
      $("#receiverEmail").val($("#purchaserEmail").val());
    }
  });

  $("#previousStep").click(function(){
    window.location.href = "./shoppinglist.html";
  });

  $("#nextStep").click(function(){
    let isPass = true;
    //js 的值可能是 "" or undefined or null
    if(!$("#purchaserName").val()){
      $("#purchaserNameER").text("此為必填欄位");
      isPass = false;
      
    }
    if(!$("#purchaserPhone").val()){
      $("#purchaserPhoneER").text("此為必填欄位");
      isPass = false;
      
    }
    if(!$("#purchaserEmail").val()){
      $("#purchaserEmailER").text("此為必填欄位");
      isPass = false;
      
    }
    if(!$("#receiverName").val()){
      $("#receiverNameER").text("此為必填欄位");
      isPass = false;
      
    }
    if(!$("#receiverPhone").val()){
      $("#receiverPhoneER").text("此為必填欄位");
      isPass = false;
      
    }
    if(!$("#receiverEmail").val()){
      $("#receiverEmailER").text("此為必填欄位");
      isPass = false;
      
    }
    
    if(!isPass){
      return;
    }
    
    let OrderListVin = {
      purchaser:$("#purchaserName").val(),
      purchaserPhone:$("#purchaserPhone").val(),
      purchaserEmail:$("#purchaserEmail").val(),
      receiver:$("#receiverName").val(),
      receiverPhone:$("#receiverPhone").val(),
      receiverEmail:$("#receiverEmail").val()
      
    }

  // console.log(OrderListVin);
    $.ajax({
          url: '/bunnyProject/orderList',
          data: JSON.stringify(OrderListVin), //這邊放整個要傳入的物件
          type: "POST",
          // dataType: "json",
          contentType: "application/json;charset=utf-8",
          success: function(data) {
           	window.location.href = "./Order_credit.html";
          },
          error: function(data) {
            alert("checkouterror")
          }
        });
});
})
</script>
<style>
  .errorMsg{
    font: bolder 12px;
    color:red;
  }
</style>
</html>
